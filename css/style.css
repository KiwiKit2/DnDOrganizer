/* Root theme vars */
:root {
  --bg: #0d0f11;
  --bg-alt: #14171a;
  --bg-raised: #1d2125;
  --border: #2a2f35;
  --border-accent: #444b53;
  --text: #d6d9dd;
  --text-dim: #7d848c;
  --accent: #4f8dff;
  --accent-glow: 174 72% 56%;
  --danger: #ff5576;
  --radius-s: 4px;
  --radius-m: 8px;
  --radius-l: 14px;
  --shadow-1: 0 2px 4px -2px rgba(0,0,0,.5),0 4px 16px -4px rgba(0,0,0,.4);
  font-family: 'Inter', system-ui, sans-serif;
  color-scheme: dark;
}

.light {
  --bg: #f5f7fa;
  --bg-alt: #ffffff;
  --bg-raised: #ffffff;
  --border: #dfe3e7;
  --border-accent: #b9c2ca;
  --text: #222;
  --text-dim: #66707a;
  --accent: #155eef;
  --danger: #d43652;
  color-scheme: light;
}

html,body {height:100%;margin:0;padding:0;background:var(--bg);color:var(--text);} 
body {display:flex;}

.app-shell {display:flex;flex:1;min-height:100vh;width:100%;}
.sidebar {width:220px;background:linear-gradient(180deg,var(--bg-alt),var(--bg));border-right:1px solid var(--border);display:flex;flex-direction:column;padding:18px 14px;gap:20px;}
.brand {font-size:20px;font-weight:600;letter-spacing:.5px;}
.nav {display:flex;flex-direction:column;gap:6px;}
.nav-btn {all:unset;cursor:pointer;padding:10px 12px;border-radius:var(--radius-m);font-size:14px;font-weight:500;background:var(--bg-raised);border:1px solid var(--border);transition:.25s;background:linear-gradient(145deg,#171b1f,#15181b);}
.nav-btn:hover {border-color:var(--border-accent);}
.nav-btn.active {background:var(--accent);color:#fff;box-shadow:0 0 0 1px #000,0 0 0 2px var(--accent);}
.sidebar-footer {margin-top:auto;display:flex;align-items:center;gap:10px;}
.toggle {display:flex;align-items:center;gap:4px;font-size:12px;cursor:pointer;}
.toggle input {accent-color:var(--accent);}

.main {flex:1;display:flex;flex-direction:column;}
.topbar {display:flex;align-items:center;gap:14px;padding:12px 18px;border-bottom:1px solid var(--border);background:var(--bg-alt);backdrop-filter:blur(8px);position:sticky;top:0;z-index:20;}
.breadcrumbs {font-size:13px;color:var(--text-dim);}
#search {background:var(--bg-raised);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:var(--radius-l);min-width:220px;font-size:14px;}
#search:focus {outline:2px solid var(--accent);}
#themeSwitch {background:var(--bg-raised);color:var(--text);border:1px solid var(--border);border-radius:50%;width:38px;height:38px;cursor:pointer;font-size:16px;display:grid;place-items:center;}
#themeSwitch:hover {border-color:var(--accent);}
.pulse {animation:pulse 1s ease-in-out 0s 4 alternate;}
@keyframes pulse {from {box-shadow:0 0 0 0 var(--accent);} to {box-shadow:0 0 0 6px rgba(79,141,255,0);} }

.view {display:none;padding:18px 22px;animation:fade .4s ease;}
.view.active {display:block;}
@keyframes fade {from {opacity:0;transform:translateY(6px);} to {opacity:1;transform:translateY(0);} }

.toolbar {display:flex;justify-content:space-between;align-items:center;gap:20px;margin-bottom:12px;flex-wrap:wrap;}
.table-wrap {overflow:auto;border:1px solid var(--border);border-radius:var(--radius-m);background:var(--bg-raised);box-shadow:var(--shadow-1);max-height:calc(100vh - 250px);}
#dataTable {border-collapse:collapse;width:100%;min-width:800px;font-size:13px;}
#dataTable th,#dataTable td {padding:8px 10px;border-bottom:1px solid var(--border);text-align:left;}
#dataTable thead th {position:sticky;top:0;background:var(--bg-alt);z-index:5;font-weight:600;font-size:12px;letter-spacing:.5px;text-transform:uppercase;cursor:pointer;}
#dataTable tbody tr {transition:.15s;background:linear-gradient(145deg,#14171a,#121416);}
#dataTable tbody tr:hover {background:#1b2024;}
#dataTable tbody tr.selected {outline:2px solid var(--accent);}

.mini-btn, .accent-btn {all:unset;cursor:pointer;background:var(--accent);color:#fff;padding:8px 14px;border-radius:var(--radius-m);font-size:12px;font-weight:600;letter-spacing:.5px;box-shadow:0 2px 4px -2px rgba(0,0,0,.6),0 4px 10px -2px rgba(0,0,0,.4);}
.mini-btn {background:var(--bg-raised);color:var(--text);border:1px solid var(--border);padding:6px 10px;font-weight:500;transition:all 0.15s ease;}
.mini-btn:hover {border-color:var(--border-accent);}
.mini-btn:active {transform:translateY(1px);}
.mini-btn.active {background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 0 8px rgba(74, 144, 226, 0.3);}
.mini-btn.danger {color:#ff667d;border-color:#ff667d;background:rgba(255,80,110,0.08);} 
.mini-btn.danger:hover {background:rgba(255,80,110,0.15);} 
.accent-btn:hover {filter:brightness(1.1);}

select {background:var(--bg-raised);color:var(--text);border:1px solid var(--border);padding:6px 10px;border-radius:var(--radius-m);font-size:13px;}
select:focus {outline:2px solid var(--accent);}

.kanban {display:flex;gap:18px;align-items:flex-start;overflow-x:auto;padding-bottom:20px;}
.board-toolbar {display:flex;gap:16px;align-items:center;margin-bottom:14px;flex-wrap:wrap;}
.empty-hint {margin-top:20px;font-size:13px;color:var(--text-dim);} 
.empty-hint.hidden {display:none;}
.kanban-column {background:var(--bg-raised);border:1px solid var(--border);border-radius:var(--radius-m);min-width:260px;display:flex;flex-direction:column;max-height:calc(100vh - 240px);}
.kanban-column header {padding:10px 14px;font-size:13px;font-weight:600;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
.kanban-column header span {opacity:.55;font-weight:500;}
.kanban-column.over-wip header {background:linear-gradient(90deg,rgba(255,85,118,0.18),transparent);}
.kanban-column header .add-mini {padding:4px 8px;font-size:11px;}
.kanban-column header .col-title {cursor:pointer;}
.kanban-cards {display:flex;flex-direction:column;gap:10px;overflow:auto;padding:14px;}
.board-summary{display:flex;flex-wrap:wrap;gap:10px;margin:4px 0 14px;font-size:11px}
.board-summary .metric{background:var(--bg-raised);border:1px solid var(--border);padding:6px 10px;border-radius:30px;display:flex;align-items:center;gap:8px;line-height:1}
.board-summary .metric .bar{width:90px;height:6px;background:#1a1f23;border-radius:4px;overflow:hidden;position:relative}
.board-summary .metric .bar span{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,var(--accent),#7fb3ff);}
.card {background:linear-gradient(145deg,#20252a,#1b1f23);border:1px solid var(--border);border-radius:var(--radius-m);padding:10px 12px;font-size:12px;display:flex;flex-direction:column;gap:6px;cursor:grab;box-shadow:0 2px 4px -2px rgba(0,0,0,.6),0 4px 16px -4px rgba(0,0,0,.4);} 
.card.dragging {opacity:.4;}
.card h4 {margin:0;font-size:12px;font-weight:600;}
.card .meta {display:flex;flex-wrap:wrap;gap:6px;font-size:11px;color:var(--text-dim);}
.badge {background:var(--accent);color:#fff;padding:2px 6px;border-radius:var(--radius-s);font-size:10px;font-weight:600;letter-spacing:.5px;}
.card img.thumb {width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:10px;border:1px solid var(--border);background:#111;}
.grid-board {display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;padding:10px 4px;}
.grid-token {background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:10px;display:flex;flex-direction:column;gap:8px;position:relative;box-shadow:var(--shadow-1);} 
.grid-token img {width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:12px;border:1px solid var(--border);background:#090b0d;}
.grid-token h5 {margin:0;font-size:13px;font-weight:600;}
.tag-row {display:flex;flex-wrap:wrap;gap:6px;font-size:10px;color:var(--text-dim);} 

.footer {margin-top:auto;padding:10px 18px;font-size:12px;color:var(--text-dim);border-top:1px solid var(--border);background:var(--bg-alt);display:flex;gap:18px;align-items:center;}

/* Lean mode reduces navigation to Map only */
.lean .nav .nav-btn{display:none}
.lean .nav .nav-btn[data-view="map"]{display:block}
/* Enhanced Entities System */
.entities-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--border);
}

.entities-header h2 {
  margin: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.8rem;
}

.entities-actions {
  display: flex;
  gap: 0.75rem;
}

.entities-filters {
  background: var(--bg-raised);
  padding: 1rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
  border: 1px solid var(--border);
}

.search-section {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  align-items: center;
}

.search-section input[type="search"] {
  flex: 1;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border);
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

.search-section input[type="search"]:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.filter-section {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-bottom: 1rem;
}

.filter-section label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  transition: background-color 0.2s ease;
}

.filter-section label:hover {
  background: var(--bg);
}

.sort-section label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-section select {
  padding: 0.5rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
}

.entities-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.entity-card {
  background: var(--bg-raised);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1rem;
  transition: all 0.3s ease;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.entity-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #667eea, #764ba2);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.entity-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  border-color: #667eea;
}

.entity-card:hover::before {
  opacity: 1;
}

.entity-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.75rem;
}

.entity-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin: 0;
  line-height: 1.3;
}

.entity-type {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.entity-description {
  color: var(--text-muted);
  font-size: 0.9rem;
  line-height: 1.4;
  margin-bottom: 0.75rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.entity-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-bottom: 0.75rem;
}

.entity-tag {
  background: var(--bg);
  color: var(--text-muted);
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
  font-size: 0.7rem;
  border: 1px solid var(--border);
}

.entity-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.entity-rarity {
  font-weight: 500;
  text-transform: capitalize;
}

.entity-rarity.common { color: #6b7280; }
.entity-rarity.uncommon { color: #10b981; }
.entity-rarity.rare { color: #3b82f6; }
.entity-rarity.very-rare { color: #8b5cf6; }
.entity-rarity.legendary { color: #f59e0b; }
.entity-rarity.artifact { color: #ef4444; }

/* Modal Styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.modal.hidden {
  display: none;
}

.modal-content {
  background: var(--bg);
  border-radius: 16px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid var(--border);
}

.modal-header h3 {
  margin: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--text-muted);
  padding: 0.5rem;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.close-btn:hover {
  background: var(--bg-raised);
  color: var(--text);
}

.modal-body {
  padding: 1.5rem;
}

.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-group.full-width {
  grid-column: 1 / -1;
}

.form-group label {
  font-weight: 500;
  color: var(--text);
}

.form-group input,
.form-group select,
.form-group textarea {
  padding: 0.75rem;
  border: 2px solid var(--border);
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.3s ease;
  background: var(--bg);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  outline: none;
}

.modal-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 1.5rem;
  justify-content: flex-end;
}

.primary-btn, .secondary-btn, .danger-btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}

.primary-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.primary-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.secondary-btn {
  background: var(--bg-raised);
  color: var(--text);
  border: 1px solid var(--border);
}

.secondary-btn:hover {
  background: var(--bg);
  border-color: #667eea;
}

.danger-btn {
  background: #ef4444;
  color: white;
}

.danger-btn:hover {
  background: #dc2626;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
}

.mini-btn {
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  border: 1px solid var(--border);
  background: var(--bg-raised);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.mini-btn:hover {
  background: var(--bg);
  border-color: #667eea;
}

/* New Augurio Mode Layout */
.augurio-layout {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  max-width: 1000px;
  margin: 0 auto;
  padding: 1rem;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(74, 144, 226, 0.1) 100%);
  border-radius: 12px;
  border: 1px solid rgba(102, 126, 234, 0.2);
}

/* Character Header Section */
.augurio-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: linear-gradient(135deg, var(--bg-raised) 0%, rgba(102, 126, 234, 0.1) 100%);
  border: 1px solid rgba(102, 126, 234, 0.3);
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
}

.character-image-section {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.character-image-placeholder {
  width: 80px;
  height: 80px;
  border: 2px solid rgba(102, 126, 234, 0.4);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background: linear-gradient(135deg, var(--bg) 0%, rgba(102, 126, 234, 0.1) 100%);
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
}

.character-image-placeholder img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
}

.image-placeholder-text {
  font-size: 1.2rem;
  color: var(--text-muted);
  font-weight: 500;
}

.character-basic-info {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.char-name-input {
  font-size: 1.2rem;
  font-weight: bold;
  background: transparent;
  border: none;
  border-bottom: 2px solid rgba(102, 126, 234, 0.3);
  padding: 0.5rem 0;
  color: var(--text-primary);
  min-width: 200px;
  transition: all 0.3s ease;
}

.char-name-input:focus {
  outline: none;
  border-bottom-color: var(--accent);
  background: rgba(102, 126, 234, 0.05);
  border-radius: 4px 4px 0 0;
}

.character-meta {
  display: flex;
  gap: 1rem;
  font-size: 0.9rem;
  color: var(--text-muted);
}

.character-level, .character-type {
  background: var(--bg-secondary);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  border: 1px solid var(--border);
}

.image-upload-btn {
  position: absolute;
  bottom: 5px;
  right: 5px;
  background: var(--bg-raised);
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 30px;
  height: 30px;
  cursor: pointer;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.remove-image-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  background: rgba(255, 0, 0, 0.8);
  color: white;
  border: none;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.remove-image-btn:hover {
  background: rgba(255, 0, 0, 1);
}

.character-info-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.character-name-field input {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid var(--border);
  border-radius: 8px;
  font-size: 1.2rem;
  font-weight: 600;
  background: var(--bg);
}

.character-description-field textarea {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid var(--border);
  border-radius: 8px;
  background: var(--bg);
  resize: vertical;
  font-family: inherit;
}

/* Stats Grid Section - Redesigned for elegance */
.augurio-stats-section {
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.95) 0%, 
    rgba(35, 42, 58, 0.90) 25%,
    rgba(28, 35, 50, 0.92) 50%,
    rgba(32, 39, 55, 0.88) 100%);
  border: 1px solid rgba(120, 140, 180, 0.15);
  border-radius: 18px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 
    0 8px 32px rgba(15, 20, 35, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  overflow: hidden;
}

.augurio-stats-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.6) 20%, 
    rgba(150, 170, 210, 0.8) 50%, 
    rgba(120, 140, 180, 0.6) 80%, 
    transparent 100%);
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.5rem;
  max-width: 800px;
  margin: 0 auto;
}

.stats-column {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  background: linear-gradient(145deg, 
    rgba(40, 48, 65, 0.6) 0%, 
    rgba(30, 36, 52, 0.8) 100%);
  border: 1px solid rgba(120, 140, 180, 0.2);
  border-radius: 12px;
  padding: 1.25rem;
  box-shadow: 
    0 4px 16px rgba(15, 20, 35, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.stats-column::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.4) 50%, 
    transparent 100%);
}

.stats-column:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 8px 24px rgba(15, 20, 35, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.column-label {
  text-align: center;
  font-weight: 600;
  font-size: 0.85rem;
  color: rgba(180, 195, 220, 0.9);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 0.75rem;
  border-bottom: 1px solid rgba(120, 140, 180, 0.15);
  margin: -1.25rem -1.25rem 0.75rem -1.25rem;
  background: linear-gradient(135deg, 
    rgba(50, 58, 75, 0.4) 0%, 
    rgba(40, 48, 65, 0.6) 100%);
  border-radius: 12px 12px 0 0;
  position: relative;
}

.column-label::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.6) 50%, 
    transparent 100%);
}

.stat-box {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.stat-box:hover {
  background: rgba(120, 140, 180, 0.05);
}

.stat-box label {
  font-size: 0.8rem;
  font-weight: 500;
  color: rgba(180, 195, 220, 0.85);
  min-width: 36px;
  text-align: left;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.stat-box input {
  padding: 0.5rem 0.75rem;
  border: 1px solid rgba(120, 140, 180, 0.2);
  border-radius: 8px;
  text-align: center;
  font-weight: 600;
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.8) 0%, 
    rgba(35, 42, 58, 0.6) 100%);
  color: rgba(220, 230, 245, 0.95);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  width: 65px;
  font-size: 0.9rem;
  box-shadow: 
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.02);
}

.stat-box input:focus {
  border-color: rgba(120, 140, 180, 0.6);
  box-shadow: 
    0 0 0 3px rgba(120, 140, 180, 0.15),
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 2px 8px rgba(120, 140, 180, 0.1);
  outline: none;
  background: linear-gradient(135deg, 
    rgba(30, 36, 52, 0.9) 0%, 
    rgba(40, 48, 65, 0.7) 100%);
  transform: translateY(-1px);
}

/* Inventory Section - Redesigned for elegance */
.augurio-inventory-section {
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.95) 0%, 
    rgba(35, 42, 58, 0.90) 25%,
    rgba(28, 35, 50, 0.92) 50%,
    rgba(32, 39, 55, 0.88) 100%);
  border: 1px solid rgba(120, 140, 180, 0.15);
  border-radius: 18px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 
    0 8px 32px rgba(15, 20, 35, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  overflow: hidden;
}

.augurio-inventory-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.6) 20%, 
    rgba(150, 170, 210, 0.8) 50%, 
    rgba(120, 140, 180, 0.6) 80%, 
    transparent 100%);
}

.augurio-inventory-section h3 {
  margin: 0 0 1.5rem 0;
  text-align: center;
  font-size: 1.1rem;
  color: rgba(180, 195, 220, 0.9);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.inventory-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
}

.inventory-item {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.inventory-item label {
  font-weight: 500;
  text-align: center;
  color: rgba(180, 195, 220, 0.85);
  font-size: 0.85rem;
  padding: 0.75rem;
  background: linear-gradient(135deg, 
    rgba(50, 58, 75, 0.4) 0%, 
    rgba(40, 48, 65, 0.6) 100%);
  border-radius: 8px;
  border: 1px solid rgba(120, 140, 180, 0.15);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.inventory-item textarea {
  padding: 0.75rem;
  border: 1px solid rgba(120, 140, 180, 0.2);
  border-radius: 8px;
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.8) 0%, 
    rgba(35, 42, 58, 0.6) 100%);
  color: rgba(220, 230, 245, 0.95);
  resize: vertical;
  font-family: inherit;
  font-size: 0.9rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.02);
}

.inventory-item textarea:focus {
  border-color: rgba(120, 140, 180, 0.6);
  box-shadow: 
    0 0 0 3px rgba(120, 140, 180, 0.15),
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 2px 8px rgba(120, 140, 180, 0.1);
  outline: none;
  background: linear-gradient(135deg, 
    rgba(30, 36, 52, 0.9) 0%, 
    rgba(40, 48, 65, 0.7) 100%);
}

/* Character Description Section - Redesigned for elegance */
.augurio-description-section {
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.95) 0%, 
    rgba(35, 42, 58, 0.90) 25%,
    rgba(28, 35, 50, 0.92) 50%,
    rgba(32, 39, 55, 0.88) 100%);
  border: 1px solid rgba(120, 140, 180, 0.15);
  border-radius: 18px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 
    0 8px 32px rgba(15, 20, 35, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  overflow: hidden;
}

.augurio-description-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.6) 20%, 
    rgba(150, 170, 210, 0.8) 50%, 
    rgba(120, 140, 180, 0.6) 80%, 
    transparent 100%);
}

.augurio-description-section h3 {
  margin: 0 0 1.5rem 0;
  text-align: center;
  font-size: 1.1rem;
  color: rgba(180, 195, 220, 0.9);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.augurio-description-section textarea {
  width: 100%;
  padding: 1rem;
  border: 1px solid rgba(120, 140, 180, 0.2);
  border-radius: 12px;
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.8) 0%, 
    rgba(35, 42, 58, 0.6) 100%);
  color: rgba(220, 230, 245, 0.95);
  resize: vertical;
  min-height: 120px;
  font-family: inherit;
  font-size: 0.9rem;
  line-height: 1.5;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.02);
}

.augurio-description-section textarea:focus {
  border-color: rgba(120, 140, 180, 0.6);
  box-shadow: 
    0 0 0 3px rgba(120, 140, 180, 0.15),
    inset 0 1px 3px rgba(15, 20, 35, 0.4),
    0 2px 8px rgba(120, 140, 180, 0.1);
  outline: none;
  background: linear-gradient(135deg, 
    rgba(30, 36, 52, 0.9) 0%, 
    rgba(40, 48, 65, 0.7) 100%);
}

/* Moves Section - Redesigned for elegance */
.augurio-moves-section {
  background: linear-gradient(135deg, 
    rgba(25, 31, 45, 0.95) 0%, 
    rgba(35, 42, 58, 0.90) 25%,
    rgba(28, 35, 50, 0.92) 50%,
    rgba(32, 39, 55, 0.88) 100%);
  border: 1px solid rgba(120, 140, 180, 0.15);
  border-radius: 18px;
  padding: 2rem;
  box-shadow: 
    0 8px 32px rgba(15, 20, 35, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  position: relative;
  overflow: hidden;
}

.augurio-moves-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(120, 140, 180, 0.6) 20%, 
    rgba(150, 170, 210, 0.8) 50%, 
    rgba(120, 140, 180, 0.6) 80%, 
    transparent 100%);
}

.moves-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.25rem;
}

.moves-header h3 {
  margin: 0;
  font-size: 1.2rem;
  color: var(--accent);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.moves-controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.moves-controls input {
  padding: 0.375rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
}

.moves-controls button {
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-raised);
  cursor: pointer;
  font-weight: 500;
}

.moves-controls button:hover {
  background: var(--bg);
  border-color: #667eea;
}

.move-form {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: 1rem;
  align-items: start;
}

.move-form input,
.move-form textarea {
  padding: 0.75rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg);
  font-family: inherit;
}

.move-form textarea {
  resize: vertical;
  min-height: 60px;
}

.move-form input:focus,
.move-form textarea:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
  outline: none;
}

/* Responsive Design */
@media (max-width: 768px) {
  .augurio-header {
    grid-template-columns: 1fr;
    text-align: center;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .inventory-grid {
    grid-template-columns: 1fr;
  }
  
  .move-form {
    grid-template-columns: 1fr;
  }
  
  .moves-header {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }
}

@media (max-width: 480px) {
  .augurio-layout {
    padding: 0.5rem;
  }
  
  .character-image-placeholder {
    width: 120px;
    height: 120px;
  }
}

.lean #view-table,.lean #view-board,.lean #view-moves,.lean #view-entities,.lean #view-about{display:none!important}

.help-fab{position:fixed;right:16px;bottom:16px;width:44px;height:44px;border-radius:50%;border:1px solid var(--border);background:var(--accent);color:#fff;font-weight:800;font-size:18px;display:grid;place-items:center;box-shadow:var(--shadow-1);z-index:500;cursor:pointer}

.prose {max-width:760px;}
.prose h1 {margin-top:0;font-size:28px;}
.prose code {background:var(--bg-raised);padding:2px 6px;border-radius:var(--radius-s);}

.stats-summary {display:grid;gap:12px;margin-top:24px;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));}
.stat-box {background:var(--bg-raised);border:1px solid var(--border);padding:14px 16px;border-radius:var(--radius-m);display:flex;flex-direction:column;gap:4px;}
.stat-box h3 {margin:0;font-size:13px;font-weight:600;color:var(--text-dim);}
.stat-box .value {font-size:20px;font-weight:600;}

/* Modal */
/* Map prototype */
.map-toolbar {display:flex;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap;}
.map-toolbar.compact{justify-content:space-between}
.map-toolbar .map-left,.map-toolbar .map-right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.map-more{border:1px solid var(--border);border-radius:12px;background:var(--bg-raised);padding:10px 12px;box-shadow:var(--shadow-1);margin-bottom:10px}
.map-more .more-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:8px 0}
/* Hide clutter on Map view: keep theme and help only */
.main .topbar .hide-on-map{display:inline-flex}
/* When Map view is active, hide marked controls */
body:has(#view-map.view.active) .topbar .hide-on-map{display:none !important}
.map-stage {position:relative;overflow:auto;border:1px solid var(--border);border-radius:18px;background:#0b0e10;min-height:520px;box-shadow:var(--shadow-1);transition:all 0.2s ease;} 
.map-stage.mode-wall {cursor:crosshair;}
.map-stage.mode-reveal {cursor:crosshair;}
.map-stage.mode-ruler {cursor:crosshair;}
#battleMap {background:repeating-conic-gradient(from 0deg,#111 0deg,#111 90deg,#101417 90deg,#101417 180deg);background-size:60px 60px;display:block;border-radius:14px;}
.token-layer,.fog-layer,.walls-layer,.overlay-layer {position:absolute;left:0;top:0;inset:0;}
.token-layer {pointer-events:auto;}
.fog-layer {pointer-events:none;}
.map-stage.mode-reveal .fog-layer {pointer-events:auto;cursor:crosshair;}
.walls-layer {pointer-events:none;}
.overlay-layer {pointer-events:auto;}
.cursor-layer{position:absolute;left:0;top:0;inset:0;pointer-events:none;z-index:40}
.remote-cursor{position:absolute;transform:translate(-50%,-50%);display:flex;align-items:center;gap:6px}
.remote-cursor .dot{width:10px;height:10px;border-radius:50%;box-shadow:0 0 0 2px #000}
.remote-cursor .tag{font-size:11px;background:var(--bg-alt);border:1px solid var(--border);padding:2px 6px;border-radius:10px;box-shadow:var(--shadow-1)}
.token {position:absolute;transform:translate(-50%,-50%);width:50px;height:50px;border:2px solid var(--accent);border-radius:50%;background:#4a90e2 center/cover no-repeat;box-shadow:0 4px 12px -4px rgba(0,0,0,.6);cursor:pointer;user-select:none;} 
.token[data-type="enemy"] {border-color:#ff5576;}
.token[data-type="player"] {border-color:#4f8dff;}
.token.selected {outline:3px solid #fff;}
.token .direction-indicator {position:absolute;top:-8px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:12px solid white;pointer-events:none;z-index:10;}
.token .badge-stack {position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);display:flex;gap:4px;}
.token .hp-badge {background:#1a2228;color:#fff;font-size:9px;padding:2px 5px;border-radius:10px;border:1px solid var(--border);min-width:26px;text-align:center;}
.token .status-dot {width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 1px #000;}
.map-hint {font-size:12px;color:var(--text-dim);margin-top:10px;}
.fog-layer{pointer-events:none;mix-blend-mode:normal;}
.fog-group{display:flex;gap:6px;}
.map-tools-group{display:flex;gap:6px;flex-wrap:wrap;align-items:center;margin-left:auto;}
.aoe-group{display:flex;gap:4px;}
.scenes-group{display:flex;gap:6px;align-items:center}
.fog-adv-group{display:flex;gap:6px;align-items:center;}
.fog-adv-group input[type=range]{width:90px;}
.layer-toggles{display:flex;gap:10px;align-items:center;margin-left:6px;font-size:12px;color:var(--text-dim);}
.layer-toggles label{display:flex;gap:6px;align-items:center;}
.toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:var(--bg-alt);border:1px solid var(--border);padding:10px 14px;border-radius:12px;box-shadow:var(--shadow-1);font-size:12px;z-index:600}
.toast.hidden{display:none}
.gm-mode .fog-layer{opacity:.25}
.initiative-panel{position:absolute;right:10px;top:10px;background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:10px 12px;width:220px;box-shadow:var(--shadow-1);font-size:12px;z-index:30;}
.initiative-panel .panel-head{font-weight:600;display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;font-size:12px;}
.initiative-panel ol{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:4px;max-height:280px;overflow:auto;}
.initiative-panel li{background:linear-gradient(145deg,#20252a,#1b1f23);border:1px solid var(--border);padding:4px 8px;border-radius:10px;display:flex;justify-content:space-between;align-items:center;gap:6px;}
.initiative-panel li.active{outline:2px solid var(--accent);}
.token-panel{position:absolute;right:10px;top:310px;background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:10px 12px;width:220px;box-shadow:var(--shadow-1);font-size:12px;z-index:30;display:flex;flex-direction:column;gap:8px}
.token-panel .panel-head{font-weight:600;margin-bottom:4px}
.token-panel label{display:flex;flex-direction:column;gap:4px;font-size:11px;color:var(--text-dim)}
.token-panel input, .token-panel select{background:var(--bg-alt);border:1px solid var(--border);color:var(--text);padding:6px 8px;border-radius:10px;font:inherit;font-size:12px}

.scene-panel{position:absolute;right:240px;top:10px;background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:10px 12px;width:240px;box-shadow:var(--shadow-1);font-size:12px;z-index:30;display:flex;flex-direction:column;gap:8px}
.scene-panel ul{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;max-height:280px;overflow:auto}
.scene-panel li{display:flex;justify-content:space-between;gap:8px;align-items:center;background:linear-gradient(145deg,#20252a,#1b1f23);border:1px solid var(--border);padding:6px 8px;border-radius:10px}
.scene-panel li .title{flex:1}
.scene-panel .panel-actions{display:flex;gap:6px}

/* Simple Mode: hide advanced widgets */
.simple-mode .fog-adv-group,
.simple-mode #clearWallsBtn,
.simple-mode #clearTemplatesBtn,
.simple-mode #exportImageBtn,
.simple-mode #mapHelpBtn,
.simple-mode .aoe-group,
.simple-mode .layer-toggles,
.simple-mode .mp-group { display:none !important; }
.initiative-panel button{font-size:10px;padding:4px 6px;}
.ruler-line{position:absolute;pointer-events:none;border:1px dashed var(--accent);}
.token-context{position:fixed;z-index:500;background:var(--bg-alt);border:1px solid var(--border);border-radius:12px;min-width:180px;padding:6px 0;box-shadow:0 12px 32px -10px rgba(0,0,0,.7);font-size:13px;}
.token-context.hidden{display:none;}
.token-context ul{list-style:none;margin:0;padding:0;}
.token-context li{padding:8px 14px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;}
.token-context li:hover{background:#1d2328;}
.walls-layer{mix-blend-mode:normal;}
.overlay-layer{mix-blend-mode:normal;}
.template-shape{position:absolute;pointer-events:auto;border:2px dashed var(--accent);background:rgba(79,141,255,.12);border-radius:50%;}
.template-shape[data-kind="cone"],.template-shape[data-kind="line"]{border-radius:0;}
.template-shape .resize-handle{position:absolute;width:14px;height:14px;background:var(--accent);border-radius:50%;right:-7px;bottom:-7px;cursor:nwse-resize;box-shadow:0 0 0 2px #000;}
.multi-select-rect{position:absolute;border:2px dashed var(--accent);background:rgba(79,141,255,.15);pointer-events:none;z-index:25;}
/* --- Enhanced wall mode UI --- */
.wall-overlay{position:absolute;inset:0;pointer-events:none;z-index:24;font-size:12px;font-weight:500;font-family:var(--font,Inter,Arial,sans-serif);} 
.wall-overlay .wall-hint{position:absolute;left:8px;top:8px;background:rgba(20,24,28,.85);padding:6px 10px;border:1px solid #2b343c;border-radius:6px;color:#dbe7f3;backdrop-filter:blur(6px);max-width:320px;line-height:1.3;}
.wall-preview{position:absolute;background:rgba(79,141,255,.22);border:2px solid rgba(79,141,255,.9);border-radius:2px;pointer-events:none;z-index:26;mix-blend-mode:screen;}
.wall-handle{position:absolute;width:10px;height:10px;background:#ffd24f;border:2px solid #111;border-radius:50%;cursor:grab;z-index:27;box-shadow:0 0 0 2px rgba(0,0,0,.4);} 
.wall-handle:active{cursor:grabbing;}
#wallModeBtn.active{background:linear-gradient(90deg,#4f8dff,#6fafff);color:#fff;box-shadow:0 0 0 2px rgba(79,141,255,.4);}
.wall-overlay.hidden,.wall-preview.hidden{display:none;}
/* --- Character Page --- */
.char-page{padding:16px;display:flex;flex-direction:column;gap:16px;max-width:1200px;margin:0 auto;}
.char-top{display:flex;gap:16px;}
.char-img-wrap{width:160px;height:160px;border:2px solid #2b343c;border-radius:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;overflow:hidden;background:#14191f;}
.char-img-wrap:hover{outline:2px solid var(--accent);} 
.char-img-placeholder{font-size:14px;opacity:.5;}
.char-name{width:100%;font-size:26px;font-weight:600;padding:8px 10px;border:2px solid #2b343c;border-radius:6px;background:#101417;color:#e6eef5;}
.char-desc{margin-top:8px;width:100%;min-height:130px;resize:vertical;font-size:14px;padding:10px;border:2px solid #2b343c;border-radius:8px;background:#101417;color:#dbe3ea;}
.char-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(55px,1fr));gap:4px;padding:8px;border:2px solid #2b343c;border-radius:10px;background:#101417;}
.char-stats .stat{display:flex;flex-direction:column;align-items:center;gap:2px;padding:6px 4px;border:1px solid #273138;border-radius:8px;background:#141a20;min-width:50px;}
.char-stats .stat input{width:100%;text-align:center;font-size:14px;background:#0f1418;border:1px solid #2d3942;border-radius:4px;color:#e5edf5;padding:2px 4px;}
.char-inv textarea{width:100%;min-height:90px;resize:vertical;background:#0f1418;color:#dbe3ea;border:1px solid #273138;border-radius:8px;padding:6px;font-size:13px;line-height:1.35;}
.inv-sections{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:8px;}
.inv-block{display:flex;flex-direction:column;gap:4px;}
.inv-block.wide{grid-column:span 2;}
.char-moves-head{display:flex;align-items:center;gap:8px;}
#charMoveFilter,#charMoveAdd{background:#0f1418;border:1px solid #28323a;color:#d5dee6;padding:6px 8px;border-radius:6px;}
.char-move-list{display:flex;flex-direction:column;gap:10px;margin-top:12px;}
.char-move{border:1px solid #273138;border-radius:10px;padding:10px 12px;background:#10171c;display:flex;flex-direction:column;gap:6px;position:relative;}
.char-move h3{margin:0;font-size:15px;display:flex;align-items:center;gap:8px;}
.char-move .tags{display:flex;flex-wrap:wrap;gap:4px;}
.char-move .tag{background:#182129;border:1px solid #25303a;border-radius:4px;padding:2px 6px;font-size:11px;letter-spacing:.5px;text-transform:uppercase;}
.char-move button.remove-move{position:absolute;top:6px;right:6px;background:#2a333a;color:#dbe3ea;border:none;border-radius:4px;padding:2px 6px;cursor:pointer;font-size:11px;}
.char-move button.remove-move:hover{background:#ff5576;color:#fff;}
.char-suggestions{position:absolute;background:#10171c;border:1px solid #273138;border-radius:6px;padding:6px;display:flex;flex-direction:column;gap:4px;max-height:260px;overflow:auto;width:260px;z-index:60;margin-top:4px;}
.char-suggestions button{background:#162027;border:1px solid #22313b;color:#dbe3ea;text-align:left;padding:4px 6px;border-radius:4px;font-size:12px;cursor:pointer;}
.char-suggestions button:hover{background:#4f8dff;color:#fff;}
.map-stage.background-image #battleMap{background-size:cover;background-position:center;}
.token.highlight-move{animation:ping 1s ease-in-out infinite alternate;}
@keyframes ping {from {filter:brightness(1);} to {filter:brightness(1.5);} }

/* Compendium */
.comp-toolbar {display:flex;gap:18px;align-items:center;margin-bottom:16px;flex-wrap:wrap;}
.comp-detail {margin-top:24px;padding:22px 24px;border:1px solid var(--border);border-radius:20px;background:var(--bg-raised);box-shadow:var(--shadow-1);} 
.comp-detail.hidden {display:none;}
input#compSearch {background:var(--bg-raised);border:1px solid var(--border);color:var(--text);padding:6px 10px;border-radius:var(--radius-m);}
.modal {position:fixed;inset:0;background:rgba(0,0,0,.55);display:flex;align-items:center;justify-content:center;padding:30px;z-index:200;backdrop-filter:blur(4px);} 
.modal.hidden {display:none;}
.modal-panel {width:100%;max-width:640px;background:var(--bg-alt);border:1px solid var(--border);border-radius:18px;padding:26px 30px 34px;display:flex;flex-direction:column;gap:18px;box-shadow:0 10px 32px -8px rgba(0,0,0,.7);} 
.modal-panel.edit-panel {max-width:520px;}
form#editForm {display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));}
form#editForm label {display:flex;flex-direction:column;font-size:11px;gap:4px;font-weight:600;color:var(--text-dim);}
form#editForm input, form#editForm textarea {background:var(--bg-raised);border:1px solid var(--border);color:var(--text);padding:6px 8px;border-radius:10px;font-size:12px;}
form#editForm textarea {min-height:80px;resize:vertical;}
.modal-panel header {display:flex;align-items:center;justify-content:space-between;margin:-6px -6px 4px;}
.modal-panel h2 {margin:0;font-size:20px;letter-spacing:.5px;}
.close-btn {all:unset;cursor:pointer;font-size:26px;line-height:1;padding:4px 10px;border-radius:10px;background:var(--bg-raised);border:1px solid var(--border);} 
.close-btn:hover {border-color:var(--border-accent);} 
textarea#sheetUrlInput {min-height:120px;background:var(--bg-raised);color:var(--text);border:1px solid var(--border);border-radius:14px;padding:12px 14px;font-family:ui-monospace,monospace;font-size:13px;resize:vertical;}
textarea#sheetUrlInput:focus {outline:2px solid var(--accent);} 
.modal .actions {display:flex;gap:14px;flex-wrap:wrap;}

/* Session banner */
.session-banner{display:flex;align-items:center;gap:10px;margin:8px 0 12px;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:var(--bg-raised);box-shadow:var(--shadow-1);font-size:12px}
.session-banner .pill{background:var(--bg-alt);border:1px solid var(--border);padding:4px 8px;border-radius:999px;font-weight:600}
.session-banner .grow{flex:1;color:var(--text-dim)}
.session-banner button{padding:6px 10px}
.input-with-btn{display:flex;gap:8px}
.input-with-btn input{flex:1}

/* Welcome modal simplified UI */
.welcome-simple{display:flex;flex-direction:column;gap:10px}
.welcome-simple label{display:flex;flex-direction:column;gap:6px;font-size:11px;color:var(--text-dim);font-weight:600}
.welcome-simple input{background:var(--bg-raised);border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:12px;font-size:13px}
/* Welcome modal refinements */
.welcome-simple .wl-row{display:flex;gap:8px;margin-top:6px}
.welcome-simple .join-block{margin-top:12px}
.welcome-simple .host-code{margin-top:10px;padding:8px 10px;background:var(--bg-raised);border:1px solid var(--border);border-radius:10px;font-weight:600;letter-spacing:1px;text-align:center;font-size:15px}
.welcome-simple .host-code.copied{outline:2px solid var(--accent);}
.adv-box{margin-top:12px;padding:6px 8px;border:1px solid var(--border);border-radius:10px;background:var(--bg-alt)}
.adv-box summary{cursor:pointer;font-weight:500;}
.or-sep{display:flex;align-items:center;gap:8px;opacity:.7}
.or-sep::before,.or-sep::after{content:"";height:1px;background:var(--border);flex:1}

::-webkit-scrollbar {width:10px;height:10px;}
::-webkit-scrollbar-track {background:var(--bg);}
::-webkit-scrollbar-thumb {background:var(--border);border-radius:6px;}
::-webkit-scrollbar-thumb:hover {background:var(--border-accent);}

/* Moves view */
.moves-layout{display:grid;grid-template-columns:340px 1fr;gap:1.2rem;align-items:start}
.moves-editor{background:var(--bg-raised);border:1px solid var(--border);border-radius:20px;padding:18px 20px;box-shadow:var(--shadow-1);position:sticky;top:78px;align-self:start}
.moves-layout{display:grid;grid-template-columns:340px 1fr;gap:1.5rem;align-items:start;padding:0 1rem;}
.moves-editor{background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;padding:20px;box-shadow:var(--shadow-1);position:sticky;top:78px;align-self:start}
.moves-editor h2{margin:0 0 20px;font-size:18px;letter-spacing:.5px;color:var(--text);font-weight:600;}
.moves-editor .form-row{margin-bottom:16px;}
.moves-editor .form-row.two-col{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;}
.moves-editor .form-row.two-col label{margin-bottom:0;flex:1;}
.moves-editor form label{display:flex;flex-direction:column;font-size:12px;gap:8px;font-weight:600;color:var(--text-dim);}
.moves-editor input,.moves-editor textarea,.moves-editor select{background:var(--bg-alt);border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:8px;font:inherit;font-size:13px;transition:border-color 0.2s ease;}
.moves-editor input:focus,.moves-editor textarea:focus,.moves-editor select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(79, 141, 255, 0.1);}
.moves-editor textarea{min-height:100px;resize:vertical;}
.form-actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:20px;padding-top:16px;border-top:1px solid var(--border);}
.moves-toolbar{display:flex;gap:12px;margin-bottom:16px;align-items:center;}
.moves-toolbar input{flex:1;background:var(--bg-alt);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:8px;font-size:13px;}
.mini-select{background:var(--bg-alt);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:8px;font-size:13px;min-width:140px;}
.category-badge{display:inline-block;padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;}
.category-attack{background:#dc2626;color:white;}
.category-spell{background:#7c3aed;color:white;}
.category-utility{background:#0891b2;color:white;}
.category-defense{background:#059669;color:white;}
.category-movement{background:#ea580c;color:white;}
.category-social{background:#c2410c;color:white;}
.category-other{background:#6b7280;color:white;}
.empty-hint{text-align:center;padding:60px 20px;color:var(--text-dim);}
.empty-hint .empty-content h3{margin:0 0 8px;color:var(--text);font-size:18px;font-weight:500;}
.empty-hint .empty-content p{margin:0;font-size:14px;}

/* Image Upload and Cropping */
.file-input{padding:8px 0 !important;cursor:pointer;}
.image-preview-container{margin-top:12px;text-align:center;}
.image-preview{max-width:100%;max-height:200px;border-radius:8px;border:1px solid var(--border);}
.image-cropper-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;backdrop-filter:blur(4px);}
.image-cropper-content{background:var(--bg-raised);border-radius:20px;padding:32px;max-width:700px;width:100%;max-height:90vh;overflow:auto;box-shadow:0 25px 80px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.1);}
.image-cropper-content h3{margin:0 0 24px;color:var(--text);font-size:22px;text-align:center;font-weight:600;}
.crop-container{position:relative;margin:24px 0;background:#111;border-radius:12px;overflow:hidden;max-height:450px;display:flex;justify-content:center;align-items:center;user-select:none;}
.crop-container img{max-width:100%;max-height:450px;display:block;object-fit:contain;pointer-events:none;}
.crop-overlay{position:absolute;border:3px solid var(--accent);background:rgba(79,141,255,0.15);cursor:move;min-width:60px;min-height:60px;transition:box-shadow 0.2s ease;box-shadow:0 0 0 2000px rgba(0,0,0,0.5);}
.crop-overlay:hover{box-shadow:0 0 0 2000px rgba(0,0,0,0.6);border-color:#5a9eff;}
.crop-overlay.dragging{transition:none;border-color:#4dabf7;box-shadow:0 0 0 2000px rgba(0,0,0,0.7);}
.crop-overlay::before{content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;border:1px dashed rgba(255,255,255,0.6);pointer-events:none;border-radius:2px;}
.crop-handles{position:absolute;top:0;left:0;right:0;bottom:0;}
.crop-handle{position:absolute;width:16px;height:16px;background:var(--accent);border:3px solid white;border-radius:50%;cursor:pointer;box-shadow:0 3px 12px rgba(0,0,0,0.4);transition:all 0.15s ease;z-index:10;}
.crop-handle:hover{background:#5a9eff;transform:scale(1.2);box-shadow:0 4px 16px rgba(90,158,255,0.4);}
.crop-handle.dragging{background:#4dabf7;transform:scale(1.3);box-shadow:0 5px 20px rgba(77,171,247,0.6);}
.crop-handle.nw{top:-8px;left:-8px;cursor:nw-resize;}
.crop-handle.ne{top:-8px;right:-8px;cursor:ne-resize;}
.crop-handle.sw{bottom:-8px;left:-8px;cursor:sw-resize;}
.crop-handle.se{bottom:-8px;right:-8px;cursor:se-resize;}
.crop-handle.n{top:-8px;left:50%;transform:translateX(-50%);cursor:n-resize;}
.crop-handle.s{bottom:-8px;left:50%;transform:translateX(-50%);cursor:s-resize;}
.crop-handle.w{top:50%;left:-8px;transform:translateY(-50%);cursor:w-resize;}
.crop-handle.e{top:50%;right:-8px;transform:translateY(-50%);cursor:e-resize;}
.crop-handle.n:hover,.crop-handle.s:hover{transform:translateX(-50%) scale(1.2);}
.crop-handle.w:hover,.crop-handle.e:hover{transform:translateY(-50%) scale(1.2);}
.crop-actions{display:flex;gap:16px;justify-content:center;margin-top:28px;padding-top:24px;border-top:1px solid var(--border);}
.crop-preview{margin-top:20px;text-align:center;padding:16px;background:rgba(79,141,255,0.05);border-radius:12px;border:1px solid rgba(79,141,255,0.1);}
.crop-preview-img{width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid var(--accent);margin:0 auto;display:block;box-shadow:0 4px 20px rgba(79,141,255,0.2);}
.crop-instructions{color:var(--text-dim);font-size:14px;text-align:center;margin-bottom:20px;line-height:1.5;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;border-left:3px solid var(--accent);}

/* Character Image Improvements */
.char-img-wrap{position:relative;cursor:pointer;transition:all 0.25s ease;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,0.1);}
.char-img-wrap:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 8px 32px rgba(79,141,255,0.25);}
.char-img-wrap::after{content:'Right-click for options';position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent, rgba(0,0,0,0.9));color:white;padding:12px;font-size:12px;text-align:center;opacity:0;transition:opacity 0.25s ease;font-weight:500;}
.char-img-wrap:hover::after{opacity:1;}

/* Context Menu */
.context-menu{position:fixed;background:var(--bg-raised);border:1px solid var(--border);border-radius:12px;box-shadow:0 12px 48px rgba(0,0,0,0.4);z-index:2000;min-width:180px;padding:8px 0;backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.1);}
.context-menu-item{padding:12px 20px;cursor:pointer;display:flex;align-items:center;gap:12px;font-size:14px;color:var(--text);transition:all 0.15s ease;font-weight:500;}
.context-menu-item:hover{background:var(--accent);color:white;padding-left:24px;}
.context-menu-item span{font-size:18px;width:24px;text-align:center;transition:transform 0.15s ease;}
.context-menu-item:hover span{transform:scale(1.1);}
.moves-editor textarea{min-height:120px;resize:vertical}
.row-btns{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.4rem}
.moves-table{width:100%;border-collapse:collapse;font-size:13px;background:var(--bg-raised);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow-1);}
.moves-table th{background:var(--bg-alt);text-align:left;font-size:11px;letter-spacing:.5px;text-transform:uppercase;padding:12px 14px;position:sticky;top:0;z-index:5;font-weight:600;color:var(--text-dim);}
.moves-table td{padding:12px 14px;border-bottom:1px solid var(--border);vertical-align:top;line-height:1.4;}
.moves-table tr:hover{background:var(--bg-hover);}
.moves-table .actions-col{width:120px;text-align:center;}
.moves-table button{font-size:11px;padding:6px 10px;margin:0 2px;border-radius:6px;}
.moves-table .category-badge{margin-right:0;}
.moves-table .tag{background:var(--accent);color:#000;padding:3px 8px;border-radius:12px;font-size:10px;font-weight:600;display:inline-block;margin:0 4px 4px 0;}
#movesEmpty{padding:30px;text-align:center;opacity:.6;font-size:13px}
.hidden{display:none!important}
.locked .map-stage{pointer-events:none;}

/* D&D Character Sheet Styles */
.char-page { 
  padding: 20px; 
  max-width: 1200px; 
  margin: 0 auto; 
  display: flex; 
  flex-direction: column; 
  gap: 20px; 
}

.char-header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 20px;
  align-items: start;
  background: var(--bg-raised);
  border: 1px solid var(--border);
  border-radius: var(--radius-l);
  padding: 20px;
}

.char-main-info {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.char-name {
  font-size: 24px !important;
  font-weight: 700 !important;
  background: var(--bg-alt) !important;
  border: 1px solid var(--border) !important;
  color: var(--text) !important;
  padding: 12px 16px !important;
  border-radius: var(--radius-m) !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}

.char-basic-info {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.char-basic-info input {
  background: var(--bg-alt);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 12px;
  border-radius: var(--radius-m);
  font-size: 14px;
}

.char-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.char-abilities, .char-combat-stats, .char-skills, .char-features, .char-backstory {
  background: var(--bg-raised);
  border: 1px solid var(--border);
  border-radius: var(--radius-l);
  padding: 20px;
}

.char-abilities h3, .char-combat-stats h3, .char-skills h3, .char-features h3, .char-backstory h3 {
  margin: 0 0 16px 0;
  font-size: 18px;
  color: var(--text);
}

.abilities-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 16px;
}

.ability-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  background: var(--bg-alt);
  border: 1px solid var(--border);
  border-radius: var(--radius-m);
  padding: 12px;
}

.ability-score label {
  font-weight: 600;
  font-size: 12px;
  color: var(--text-dim);
}

.ability-score input {
  width: 50px;
  text-align: center;
  background: var(--bg);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 6px;
  border-radius: var(--radius-s);
  font-size: 16px;
  font-weight: 600;
}

.modifier {
  font-size: 14px;
  font-weight: 600;
  color: var(--accent);
}

.combat-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 16px;
}

.stat-block {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.stat-block label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-dim);
}

.stat-block input {
  background: var(--bg-alt);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 8px 12px;
  border-radius: var(--radius-m);
  font-size: 14px;
}

.skills-grid {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 24px;
}

.skill-section h4 {
  margin: 0 0 12px 0;
  font-size: 14px;
  color: var(--text-dim);
}

.skill-section label {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  font-size: 13px;
  cursor: pointer;
}

.skill-section input[type="checkbox"] {
  accent-color: var(--accent);
}

.skills-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.char-features textarea, .char-backstory textarea {
  width: 100%;
  min-height: 120px;
  background: var(--bg-alt);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 12px;
  border-radius: var(--radius-m);
  font-family: inherit;
  font-size: 14px;
  resize: vertical;
}

.char-features textarea:focus, .char-backstory textarea:focus {
  outline: 2px solid var(--accent);
}

@media (max-width: 768px) {
  .char-header {
    grid-template-columns: 1fr;
  }
  
  .char-basic-info {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .abilities-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .combat-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .skills-grid {
    grid-template-columns: 1fr;
  }
}

/* Enhanced Standard D&D Sections */
.char-abilities {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.05) 100%);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  border: 1px solid rgba(74, 144, 226, 0.15);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.char-abilities::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  border-radius: 16px 16px 0 0;
}

.char-abilities h3 {
  color: var(--accent-color);
  font-weight: 700;
  margin-bottom: 20px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.abilities-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 20px;
}

.ability-score {
  background: linear-gradient(145deg, var(--bg-primary) 0%, rgba(74, 144, 226, 0.03) 100%);
  border: 2px solid rgba(74, 144, 226, 0.2);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  transition: all 0.3s ease;
  position: relative;
}

.ability-score:hover {
  transform: translateY(-2px);
  border-color: var(--accent-color);
  box-shadow: 0 8px 20px rgba(74, 144, 226, 0.15);
}

.ability-score label {
  font-weight: 700;
  color: var(--accent-color);
  font-size: 14px;
  margin-bottom: 8px;
  display: block;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.ability-score input {
  width: 100%;
  text-align: center;
  font-size: 18px;
  font-weight: 700;
  border: none;
  background: transparent;
  color: var(--text-color);
  margin-bottom: 8px;
  padding: 8px;
  border-radius: 6px;
  transition: all 0.3s ease;
}

.ability-score input:focus {
  background: rgba(74, 144, 226, 0.1);
  outline: none;
}

.modifier {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-muted);
  background: rgba(74, 144, 226, 0.1);
  padding: 4px 8px;
  border-radius: 6px;
  display: inline-block;
}

.char-combat-stats,
.char-skills,
.char-features,
.char-inv,
.char-moves,
.char-backstory {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.05) 100%);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  border: 1px solid rgba(74, 144, 226, 0.15);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.char-combat-stats::before,
.char-skills::before,
.char-features::before,
.char-inv::before,
.char-moves::before,
.char-backstory::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  border-radius: 16px 16px 0 0;
}

.char-combat-stats h3,
.char-skills h3,
.char-features h3,
.char-inv h3,
.char-moves h3,
.char-backstory h3 {
  color: var(--accent-color);
  font-weight: 700;
  margin-bottom: 20px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Profile & Account Styles */
.profile-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
}

.profile-header {
  text-align: center;
  margin-bottom: 30px;
}

.profile-header h1 {
  color: var(--accent-color);
  margin-bottom: 8px;
}

.profile-header p {
  color: var(--text-muted);
  font-size: 16px;
}

.profile-auth-form {
  max-width: 400px;
  margin: 0 auto;
}

.profile-auth-form .form-group {
  margin-bottom: 20px;
}

.profile-auth-form .form-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 24px;
}

.avatar-preview {
  margin-top: 12px;
  text-align: center;
}

.avatar-preview img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--accent-color);
}

.profile-display {
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

.profile-avatar img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  border: 3px solid var(--accent-color);
}

.profile-details {
  flex: 1;
  min-width: 200px;
}

.profile-details h2 {
  margin: 0 0 4px 0;
  color: var(--text-color);
}

.profile-details p {
  margin: 4px 0;
  color: var(--text-muted);
  font-size: 14px;
}

.profile-stats {
  font-size: 13px !important;
  margin-top: 8px !important;
}

.profile-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.section-header h3 {
  margin: 0;
  color: var(--text-color);
}

.characters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

.character-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 16px;
  transition: border-color 0.2s ease;
}

.character-card:hover {
  border-color: var(--accent-color);
}

.character-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.character-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  background: var(--bg-secondary);
}

.character-info h4 {
  margin: 0;
  color: var(--text-color);
  font-size: 16px;
}

.character-info p {
  margin: 4px 0 0 0;
  color: var(--text-muted);
  font-size: 13px;
}

.character-card-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.data-actions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
}

.action-group h4 {
  margin: 0 0 12px 0;
  color: var(--text-color);
  font-size: 15px;
}

.action-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sync-status {
  font-size: 13px !important;
  color: var(--text-muted) !important;
  margin-top: 8px !important;
}

.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.setting-item {
  display: flex;
  align-items: center;
}

.setting-item label {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-color);
  font-size: 14px;
  cursor: pointer;
}

.setting-item input[type="checkbox"] {
  margin: 0;
}

@media (max-width: 768px) {
  .profile-display {
    flex-direction: column;
    text-align: center;
  }
  
  .section-header {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
  }
  
  .characters-grid {
    grid-template-columns: 1fr;
  }
  
  .data-actions {
    grid-template-columns: 1fr;
  }
}

/* Enhanced Character Header */
.char-header {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.08) 100%);
  border-radius: 20px;
  padding: 30px;
  margin-bottom: 20px;
  border: 1px solid rgba(74, 144, 226, 0.15);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  position: relative;
  overflow: hidden;
}

.char-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8, #7c4dff, #dc267f);
  background-size: 300% 100%;
  animation: gradientShift 8s ease infinite;
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.char-img-wrap {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  transition: all 0.3s ease;
}

.char-img-wrap:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
}

.char-main-info {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.char-name {
  font-size: 28px;
  font-weight: 700;
  /* Fixed: Removed transparent text that was making character name invisible */
  color: var(--text-color) !important;
  background: var(--bg-alt) !important;
  border: 2px solid var(--border) !important;
  padding: 12px 16px !important;
  border-radius: 10px !important;
  margin-bottom: 8px;
}

.char-basic-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 16px;
}

.char-basic-info input {
  padding: 12px 16px;
  border: 2px solid rgba(74, 144, 226, 0.2);
  border-radius: 10px;
  background: linear-gradient(145deg, var(--bg-primary) 0%, rgba(74, 144, 226, 0.03) 100%);
  font-weight: 500;
  transition: all 0.3s ease;
}

.char-basic-info input:focus {
  border-color: var(--accent-color);
  box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.15);
  transform: translateY(-1px);
}

.char-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 20px;
}

.char-actions button {
  padding: 12px 24px;
  border-radius: 10px;
  font-weight: 600;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.char-actions .accent-btn {
  background: linear-gradient(135deg, var(--accent-color) 0%, #5b7ce8 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
}

.char-actions .accent-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
}

.char-actions .mini-btn {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.1) 100%);
  color: var(--text-color);
  border: 1px solid rgba(74, 144, 226, 0.2);
}

.char-actions .mini-btn:hover {
  background: linear-gradient(135deg, rgba(74, 144, 226, 0.1) 0%, rgba(74, 144, 226, 0.2) 100%);
  transform: translateY(-1px);
  border-color: var(--accent-color);
}

/* Character Mode Switcher */
.char-mode-switcher {
  margin-bottom: 30px;
  padding: 0 20px;
}

.mode-tabs {
  display: flex;
  gap: 3px;
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.1) 100%);
  border-radius: 12px;
  padding: 6px;
  max-width: 350px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(74, 144, 226, 0.2);
}

.mode-tab {
  flex: 1;
  padding: 14px 24px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 14px;
  position: relative;
  overflow: hidden;
}

.mode-tab::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.5s ease;
}

.mode-tab:hover {
  color: var(--text-color);
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-1px);
}

.mode-tab:hover::before {
  left: 100%;
}

.mode-tab.active {
  background: linear-gradient(135deg, var(--accent-color) 0%, #5b7ce8 100%);
  color: white;
  box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
  transform: translateY(-2px);
}

.mode-tab.active::before {
  display: none;
}

.mode-section.hidden {
  display: none;
}

/* Augurio Mode Enhanced Styles */
.augurio-stats-grid {
  display: flex;
  flex-direction: column;
  gap: 28px;
  animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stat-group {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(74, 144, 226, 0.05) 100%);
  border-radius: 16px;
  padding: 24px;
  border: 1px solid rgba(74, 144, 226, 0.15);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.1);
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.stat-group::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8, #7c4dff);
  border-radius: 16px 16px 0 0;
}

.stat-group:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.1);
  border-color: rgba(74, 144, 226, 0.3);
}

.stat-group h4 {
  margin: 0 0 20px 0;
  color: var(--accent-color);
  font-size: 15px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  border-bottom: 2px solid rgba(74, 144, 226, 0.2);
  padding-bottom: 12px;
  position: relative;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stat-group h4::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 40px;
  height: 2px;
  background: linear-gradient(90deg, var(--accent-color), #5b7ce8);
  border-radius: 1px;
}

.stat-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 20px;
  margin-bottom: 20px;
}

.stat-row:last-child {
  margin-bottom: 0;
}

.augurio-stat {
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

.augurio-stat.wide {
  grid-column: span 2;
}

.augurio-stat label {
  font-weight: 700;
  font-size: 12px;
  color: var(--accent-color);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: 2px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.augurio-stat label::before {
  content: '';
  width: 4px;
  height: 4px;
  background: var(--accent-color);
  border-radius: 50%;
  opacity: 0.6;
}

.augurio-stat input,
.augurio-stat textarea {
  padding: 12px 16px;
  border: 2px solid rgba(74, 144, 226, 0.2);
  border-radius: 10px;
  background: linear-gradient(145deg, var(--bg-primary) 0%, rgba(74, 144, 226, 0.03) 100%);
  color: var(--text-color);
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.augurio-stat input:focus,
.augurio-stat textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.15), inset 0 1px 3px rgba(0, 0, 0, 0.1);
  background: var(--bg-primary);
  transform: translateY(-1px);
}

.augurio-stat input:hover,
.augurio-stat textarea:hover {
  border-color: rgba(74, 144, 226, 0.4);
  transform: translateY(-0.5px);
}

.augurio-stat textarea {
  min-height: 80px;
  resize: vertical;
  font-family: inherit;
  line-height: 1.5;
}

.augurio-stat input[type="number"] {
  text-align: center;
  font-weight: 700;
  font-size: 16px;
  background: linear-gradient(145deg, var(--bg-primary) 0%, rgba(74, 144, 226, 0.05) 100%);
}

.augurio-stat input[type="number"]:focus {
  background: linear-gradient(145deg, var(--bg-primary) 0%, rgba(74, 144, 226, 0.1) 100%);
}

/* Special animations for number inputs */
.augurio-stat input[type="number"]:focus {
  animation: pulseGlow 0.6s ease-out;
}

@keyframes pulseGlow {
  0% {
    box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(74, 144, 226, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(74, 144, 226, 0);
  }
}

/* Combat group special styling */
.stat-group:nth-child(1) {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(220, 38, 127, 0.05) 100%);
  border-color: rgba(220, 38, 127, 0.15);
}

.stat-group:nth-child(1)::before {
  background: linear-gradient(90deg, #dc267f, #ff6b9d);
}

.stat-group:nth-child(1) h4 {
  background: linear-gradient(90deg, #dc267f, #ff6b9d);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stat-group:nth-child(1) h4::after {
  background: linear-gradient(90deg, #dc267f, #ff6b9d);
}

/* Special group styling */
.stat-group:nth-child(2) {
  background: linear-gradient(145deg, var(--bg-secondary) 0%, rgba(124, 77, 255, 0.05) 100%);
  border-color: rgba(124, 77, 255, 0.15);
}

.stat-group:nth-child(2)::before {
  background: linear-gradient(90deg, #7c4dff, #9c7aff);
}

.stat-group:nth-child(2) h4 {
  background: linear-gradient(90deg, #7c4dff, #9c7aff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stat-group:nth-child(2) h4::after {
  background: linear-gradient(90deg, #7c4dff, #9c7aff);
}

@media (max-width: 768px) {
  .mode-tabs {
    max-width: 100%;
  }
  
  .stat-row {
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 16px;
  }
  
  .augurio-stat.wide {
    grid-column: span 1;
  }
  
  .stat-group {
    padding: 20px;
    gap: 24px;
  }
  
  .augurio-stat input,
  .augurio-stat textarea {
    padding: 10px 12px;
  }
}
